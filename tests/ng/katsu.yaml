# Example manifest for a Katsu build
builder: dnf
distro: Katsu Ultramarine

scripts:
  pre:
    - id: pre-test
      name: Preinstall test
      inline: |
        echo "Hello from pre.sh"
    - id: pre-test2
      name: Preinstall test 2
      file: pre-test2.sh

  post:
    - id: post-test
      name: Postinstall test
      inline: |
        echo "Hello from post.sh"

    - id: image-cleanup
      name: Clean up root filesystem
      file: image-cleanup.sh

    - id: grub-install
      name: Install GRUB
      file: grub-install.sh

    - id: selinux-label
      name: Relabel SELinux for new filesystem
      file: selinux.sh

dnf:
  releasever: 38
  packages:
    - filesystem
    - setup
    - lvm2
    - btrfs-progs
    - dmraid
    - nvme-cli
    - kernel
    - fedora-repos
    - glibc
    - glibc-common
    - dnf
    - dracut
    - mkpasswd # maybe not needed soon
    - "@core"
    - "@standard"
    - grub2-tools
    - "@hardware-support"
    - NetworkManager
    - rpm
    - libgomp

  arch_packages:
    aarch64:
      - grub2-efi-aa64
      - grub2-efi-aa64-modules
      - grub2-efi-aa64-cdboot
      - shim-aa64
      - shim-unsigned-aarch64
      - bcm283x-firmware
      - bcm283x-overlays
      - "@arm-tools"
    x86_64:
      - grub2-efi-x64
      - grub2-efi-x64-modules
      - grub2-efi-x64-cdboot
      - grub2-pc
      - grub2-pc-modules
      - shim-x64
      - shim-unsigned-x64
